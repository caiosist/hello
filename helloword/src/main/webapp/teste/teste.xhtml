<!DOCTYPE html>
<html lang="pt" xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://java.sun.com/jsf/core">

<h:head>

	<title><ui:insert name="pageTitle">Extratos Fácil</ui:insert></title>

	<link type="text/css" rel="stylesheet"
		href="#{request.contextPath}/resource/css/bootstrap/theme.css" />

	<link rel="shortcut icon"
		href="#{request.contextPath}/resource/images/favicon.ico"
		type="image/x-icon" />

	<style>
.ui-widget, .ui-widget .ui-widget {
	font-size: 13px !important;
}

.ui-state-disabled {
	opacity: .78 !important;
}
</style>
	<script>
		(function(i, s, o, g, r, a, m) {
			i['GoogleAnalyticsObject'] = r;
			i[r] = i[r] || function() {
				(i[r].q = i[r].q || []).push(arguments)
			}, i[r].l = 1 * new Date();
			a = s.createElement(o), m = s.getElementsByTagName(o)[0];
			a.async = 1;
			a.src = g;
			m.parentNode.insertBefore(a, m)
		})(window, document, 'script',
				'//www.google-analytics.com/analytics.js', 'ga');

		ga('create', 'UA-68299648-1', 'auto');
		ga('send', 'pageview');
	</script>
</h:head>
<h:body>
	<h:form id="form">
		
<!-- 		<img src="#{request.contextPath}/resource/images/logo.png" -->
<!-- 				style="float: right; max-height: 80px; max-width: 300px; margin-top: -25px" /> -->
	
		<p:messages id="mensagens" showDetail="true" autoUpdate="true"
			closable="true" />
		
		<p align="center"
			style="font-size: 26px; color: #669214; font-family: sans-serif; font-weight: bold">
			Faça um teste gratuito! =)</p>
			
		<p:panel style="border: none">
			
			<p align="left" style="font-size: 18px; color: red; font-family: sans-serif; margin-bottom: 10px">
			Informe aqui um veículo cadastrado no sem parar</p>
						
			<div style="border: 2px solid #669214; width: 720px; height: 60px">
				<h:panelGrid columns="4">
					<h:outputText value="Modelo" />
					<h:outputText value="Placa" />
					<h:outputText value="Categoria " />
					<h:outputText value="Máximo de Eixos" />
					
					<p:inputText value="#{beanTeste.veiculo.modeloVeiculo}">
						<p:ajax />
					</p:inputText>
					<p:inputText value="#{beanTeste.veiculo.placaVeiculo}">
						<p:ajax />
					</p:inputText>
					<p:selectOneMenu value="#{beanTeste.veiculo.categoria}">
						<f:selectItem itemLabel="Selecione" itemValue="" />
						<f:selectItems value="#{beanVeiculo.categorias}" />
						<p:ajax />
					</p:selectOneMenu>
					<p:inputText value="#{beanTeste.veiculo.maximoEixo}">
						<p:ajax />
					</p:inputText>
	
				</h:panelGrid>
			</div>		
		</p:panel>

		<p:panel style="border: none;">
		
			<p align="left" style="font-size: 18px; color: red; font-family: sans-serif; margin-bottom: 10px">
			Selecione sua planilha de extratos gerada pelo sem parar </p>
 		
			<div style="border: 2px solid #669214; width: 720px; height: 60px">
				<p:fileUpload fileUploadListener="#{beanTeste.fileUploadAction}"
				mode="advanced" dragDropSupport="false" auto="true"
				allowTypes="/(\.|\/)(xlsx|xls)$/"
				invalidFileMessage="Tipo de arquivo inválido!" update=":form"
				label="Selecionar" />
			</div>
		</p:panel>
		
		<br />
		
		<p align="left" style="font-size: 18px; color: red; font-family: sans-serif; margin-bottom: 10px">
			Visualize abaixo as diferenças encontradas para o veículo informado no extrato selecionado </p>
		
		<p:separator />

		<h:outputText id="text"
			style="font-family: sans-serif; color: #669214"
			value="O veículo informado possui #{beanTeste.erros} passagens incorretas." />

		<br />

		<h:outputText value="Abaixo um exemplo"
			style="font-family: sans-serif; color: #669214"
			rendered="#{not empty beanTeste.itens}" />

		<br />
		<p:separator />

		<p:dataTable id="gridPlanilha" value="#{beanTeste.itens}"
			scrollable="true" scrollHeight="330" var="planilha"
			emptyMessage="Nenhuma passagem incorreta encontrada!">

			<f:facet name="header">
           			Dados incorretos no extrato
       		 	</f:facet>

			<p:column headerText="Placa">
				<h:outputText value="#{planilha.placa}" />
			</p:column>
			<p:column headerText="Data">
				<h:outputText value="#{planilha.data}">
					<f:convertDateTime pattern="dd/MM/yyyy" timeZone="GMT-03:00" />
				</h:outputText>
			</p:column>
			<p:column headerText="Hora">
				<h:outputText value="#{planilha.hora}">
					<f:convertDateTime pattern="HH:mm:ss" timeZone="GMT-03:00" />
				</h:outputText>
			</p:column>
			<p:column headerText="Concessionária">
				<h:outputText value="#{planilha.concessionaria}" />
			</p:column>
			<p:column headerText="Praça">
				<h:outputText value="#{planilha.praca}" />
			</p:column>
			<p:column headerText="Valor Cobrado">
				<h:outputText value="#{planilha.valor}">
					<f:convertNumber pattern="#0.00" currencyCode="BRL" />
				</h:outputText>
			</p:column>
			<p:column headerText="Valor Correto">
				<h:outputText value="#{planilha.valorCorreto}">
					<f:convertNumber groupingUsed="true" minFractionDigits="2" />
				</h:outputText>
			</p:column>
			<p:column headerText="Valor de Restituição">
				<h:outputText value="#{planilha.valorRestituicao}">
					<f:convertNumber groupingUsed="true" minFractionDigits="2" />
				</h:outputText>
			</p:column>
			<p:column headerText="Categoria Cobrada">
				<h:outputText value="#{planilha.categoria}" />
			</p:column>
			<p:column headerText="Categoria Correta">
				<h:outputText value="#{planilha.categoriaCorreta}" />
			</p:column>
		</p:dataTable>
		<br></br>
		<p:separator />
	</h:form>
</h:body>
</html>
