<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">


<ui:composition template="/template/template.xhtml">
	<ui:define name="body">
		<p:panel id="panel" style="border: none;">

			<div align="center" class="page-header" style="color: #6A9A11">
				<h1 style="font-size: 40px">
					Bem-vindo
					<h:outputText value="#{beanEmpresa.empresa.nomeFantasia}" />
					!
				</h1>


				<h:panelGrid rendered="#{beanEmpresa.empresa.status == 'Pendente'}">
					<h:outputText style="color: red; font-size: 28px;"
						value="*Seu plano esta aguardando pagamento, por favor verifique a guia Meu Plano!" />
				</h:panelGrid>

				
				<p:separator />
	

				<h:panelGrid rendered="#{beanEmpresa.empresa.plano != null}">
					<p:dataTable id="gridPlanilha" dir="center"
						value="#{beanPlanilhaDownload.lastPlanilhas}" scrollable="true"
						var="planilha" emptyMessage="Nenhum registro encontrado!">

						<f:facet name="header">
           			Ultimas planilhas geradas
       		 	</f:facet>

						<p:column headerText="Data">
							<center>
								<h:outputText value="#{planilha.data}">
									<f:convertDateTime pattern="dd/MM/yyyy" timeZone="GMT-03:00" />
								</h:outputText>
							</center>
						</p:column>
						<p:column headerText="Download">
							<center>
								<p:commandButton ajax="false"
									icon="ui-icon-arrowreturnthick-1-s">
									<f:setPropertyActionListener value="#{planilha}"
										target="#{beanPlanilhaDownload.selected}" />
									<p:fileDownload value="#{beanPlanilhaDownload.file}" />
								</p:commandButton>
							</center>
						</p:column>
					</p:dataTable>
					<h:outputText
						value="*Para pesquisar planilhas geradas por data verifique a guia HistÃ³rico!" />
				</h:panelGrid>


				<!-- Selecao de planos caso nao exista -->

				<h:panelGrid rendered="#{beanEmpresa.empresa.plano == null}">

					<h:outputText value="Numero de Veiculos" />
					<p:inputText value="#{beanPlano.plano.quantidadeVeiculos}"
						onkeypress="onlyNumbers(e)" />

					<h:outputText value="Plano de pagamento" />
					<p:selectOneRadio id="periodo" value="#{beanPlano.periodo}">
						<f:selectItem itemLabel="Mensal" itemValue="1" />
						<f:selectItem itemLabel="Trimestral - 6% de Desconto"
							itemValue="3" />
						<f:selectItem itemLabel="Semestral - 10% de Desconto"
							itemValue="6" />
						<f:selectItem itemLabel="Anual - 13% de desconto" itemValue="12" />
					</p:selectOneRadio>

					<p:commandButton value="Assinar" action="#{beanPlano.assinar}" />

				</h:panelGrid>

				<br /> <br />
				<p:separator />
				<h:panelGrid>
					<h2 style="font-size: 32px">Veja abaixo um tutorial de como
						utilizar o sistema Extratos Facil!</h2>
					<br />
					<div align="center">
						<iframe width="560" height="315"
							src="https://www.youtube.com/embed/8w3RLXM5CCk" frameborder="0"
							allowfullscreen="true"></iframe>
					</div>
				</h:panelGrid>
			</div>
		</p:panel>
	</ui:define>
</ui:composition>
</html>